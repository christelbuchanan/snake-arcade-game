(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))h(e);new MutationObserver(e=>{for(const c of e)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&h(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const c={};return e.integrity&&(c.integrity=e.integrity),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?c.credentials="include":e.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(e){if(e.ep)return;e.ep=!0;const c=n(e);fetch(e.href,c)}})();class z{constructor(t,n){this.canvas=t,this.ctx=t.getContext("2d"),this.gridSize=n,this.cellSize=t.width/n,this.snake=[],this.food={x:0,y:0},this.direction="right",this.nextDirection="right",this.score=0,this.speed=150,this.isRunning=!1,this.isPaused=!1,this.gameLoop=null,this.onScoreChange=null,this.onGameOver=null,this.highScore=localStorage.getItem("snakeHighScore")||0,this.glowIntensity=0,this.glowDirection=1,this.foodPulse=0,this.lastFrameTime=0,this.eatEffect={active:!1,time:0,x:0,y:0},this.animate=this.animate.bind(this),requestAnimationFrame(this.animate)}start(){this.snake=[{x:Math.floor(this.gridSize/2),y:Math.floor(this.gridSize/2)}],this.direction="right",this.nextDirection="right",this.score=0,this.speed=150,this.isRunning=!0,this.isPaused=!1,this.generateFood(),this.onScoreChange&&this.onScoreChange(this.score,this.highScore),clearInterval(this.gameLoop),this.gameLoop=setInterval(()=>this.update(),this.speed)}generateFood(){let t;do t={x:Math.floor(Math.random()*this.gridSize),y:Math.floor(Math.random()*this.gridSize)};while(this.snake.some(n=>n.x===t.x&&n.y===t.y));this.food=t}changeDirection(t){this.direction==="up"&&t==="down"||this.direction==="down"&&t==="up"||this.direction==="left"&&t==="right"||this.direction==="right"&&t==="left"||(this.nextDirection=t)}togglePause(){if(this.isRunning)return this.isPaused=!this.isPaused,this.isPaused?clearInterval(this.gameLoop):this.gameLoop=setInterval(()=>this.update(),this.speed),this.isPaused}update(){if(!this.isRunning||this.isPaused)return;this.direction=this.nextDirection;const t={...this.snake[0]};switch(this.direction){case"up":t.y-=1;break;case"down":t.y+=1;break;case"left":t.x-=1;break;case"right":t.x+=1;break}if(t.x<0||t.x>=this.gridSize||t.y<0||t.y>=this.gridSize){this.gameOver();return}if(this.snake.some(n=>n.x===t.x&&n.y===t.y)){this.gameOver();return}this.snake.unshift(t),t.x===this.food.x&&t.y===this.food.y?(this.score+=10,this.eatEffect={active:!0,time:0,x:this.food.x*this.cellSize+this.cellSize/2,y:this.food.y*this.cellSize+this.cellSize/2},this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeHighScore",this.highScore)),this.score%50===0&&this.speed>70&&(this.speed-=10,clearInterval(this.gameLoop),this.gameLoop=setInterval(()=>this.update(),this.speed)),this.onScoreChange&&this.onScoreChange(this.score,this.highScore),this.generateFood()):this.snake.pop()}gameOver(){this.isRunning=!1,clearInterval(this.gameLoop),this.onGameOver&&this.onGameOver(this.score,this.highScore)}animate(t){const n=t-this.lastFrameTime||0;this.lastFrameTime=t,this.updateEffects(n),this.draw(),requestAnimationFrame(this.animate)}updateEffects(t){this.glowIntensity+=.003*this.glowDirection*t,this.glowIntensity>1?(this.glowIntensity=1,this.glowDirection=-1):this.glowIntensity<.5&&(this.glowIntensity=.5,this.glowDirection=1),this.foodPulse+=.005*t,this.foodPulse>Math.PI*2&&(this.foodPulse=0),this.eatEffect.active&&(this.eatEffect.time+=t,this.eatEffect.time>300&&(this.eatEffect.active=!1))}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle="#222",this.ctx.lineWidth=.5;for(let h=0;h<=this.gridSize;h++){const e=h*this.cellSize;this.ctx.beginPath(),this.ctx.moveTo(e,0),this.ctx.lineTo(e,this.canvas.height),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(0,e),this.ctx.lineTo(this.canvas.width,e),this.ctx.stroke()}if(this.eatEffect.active){const h=this.eatEffect.time/300,e=this.cellSize*(1+h),c=1-h;this.ctx.fillStyle=`rgba(255, 255, 255, ${c*.5})`,this.ctx.beginPath(),this.ctx.arc(this.eatEffect.x,this.eatEffect.y,e,0,Math.PI*2),this.ctx.fill()}const t=.15*Math.sin(this.foodPulse)+.85,n=this.cellSize*t;this.ctx.fillStyle="#ff3860",this.ctx.shadowColor="#ff3860",this.ctx.shadowBlur=10,this.ctx.beginPath(),this.ctx.arc(this.food.x*this.cellSize+this.cellSize/2,this.food.y*this.cellSize+this.cellSize/2,n/2,0,Math.PI*2),this.ctx.fill(),this.ctx.shadowBlur=0,this.snake.forEach((h,e)=>{if(e===0){this.ctx.fillStyle="#39ff14",this.ctx.shadowColor="#39ff14",this.ctx.shadowBlur=10*this.glowIntensity;const c=this.cellSize/4,i=h.x*this.cellSize,o=h.y*this.cellSize,d=this.cellSize,u=this.cellSize;this.ctx.beginPath(),this.ctx.moveTo(i+c,o),this.ctx.arcTo(i+d,o,i+d,o+u,c),this.ctx.arcTo(i+d,o+u,i,o+u,c),this.ctx.arcTo(i,o+u,i,o,c),this.ctx.arcTo(i,o,i+d,o,c),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#000",this.ctx.shadowBlur=0;const l=this.cellSize/6,a=this.cellSize/4;let f,g,S,p;switch(this.direction){case"up":f=i+a,g=o+a,S=i+d-a-l,p=o+a;break;case"down":f=i+a,g=o+u-a-l,S=i+d-a-l,p=o+u-a-l;break;case"left":f=i+a,g=o+a,S=i+a,p=o+u-a-l;break;case"right":f=i+d-a-l,g=o+a,S=i+d-a-l,p=o+u-a-l;break}this.ctx.fillRect(f,g,l,l),this.ctx.fillRect(S,p,l,l)}else{const c=1-e/this.snake.length*.6;this.ctx.fillStyle=`rgba(57, 255, 20, ${c})`;const i=2,o=this.cellSize-i*2;this.ctx.fillRect(h.x*this.cellSize+i,h.y*this.cellSize+i,o,o)}}),this.isPaused&&this.isRunning&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.5)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#fff",this.ctx.font='20px "Press Start 2P"',this.ctx.textAlign="center",this.ctx.fillText("PAUSED",this.canvas.width/2,this.canvas.height/2)),this.ctx.shadowBlur=0}}document.querySelector("#app").innerHTML=`
  <h1 class="game-title">SNAKE</h1>
  <div class="game-container">
    <canvas class="game-canvas" width="400" height="400"></canvas>
    <div class="start-screen">
      <h2>SNAKE</h2>
      <button class="btn start-btn">START GAME</button>
      <div class="controls">
        <p>Use arrow keys to move</p>
        <p>Press P to pause</p>
        <p>Swipe on mobile</p>
      </div>
    </div>
    <div class="game-over">
      <h2>GAME OVER</h2>
      <p>Final Score: <span class="final-score">0</span></p>
      <p>High Score: <span class="high-score">0</span></p>
      <button class="btn restart-btn">PLAY AGAIN</button>
    </div>
    <div class="touch-controls">
      <button class="touch-btn up-btn">↑</button>
      <div class="touch-middle">
        <button class="touch-btn left-btn">←</button>
        <button class="touch-btn right-btn">→</button>
      </div>
      <button class="touch-btn down-btn">↓</button>
    </div>
  </div>
  <div class="score-container">
    <div class="score-display">SCORE: <span class="score">0</span></div>
    <div class="high-score-display">HIGH: <span class="current-high-score">0</span></div>
  </div>
`;const v=document.querySelector(".game-canvas"),D=document.querySelector(".score"),y=document.querySelector(".current-high-score"),I=document.querySelector(".final-score"),b=document.querySelector(".high-score"),O=document.querySelector(".start-screen"),w=document.querySelector(".game-over"),T=document.querySelector(".start-btn"),A=document.querySelector(".restart-btn"),m=document.querySelector(".touch-controls"),M=document.querySelector(".up-btn"),q=document.querySelector(".down-btn"),C=document.querySelector(".left-btn"),R=document.querySelector(".right-btn"),s=new z(v,20);y.textContent=s.highScore;b.textContent=s.highScore;function B(r,t){D.textContent=r,I.textContent=r,y.textContent=t,b.textContent=t}function G(){w.classList.add("active"),m.classList.remove("active")}function F(){w.classList.remove("active")}function P(){O.style.display="none",F(),s.start(),s.onScoreChange=B,s.onGameOver=G,E()&&m.classList.add("active")}function E(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=800}T.addEventListener("click",P);A.addEventListener("click",P);window.addEventListener("keydown",r=>{if(s.isRunning)switch(r.key){case"ArrowUp":s.changeDirection("up");break;case"ArrowDown":s.changeDirection("down");break;case"ArrowLeft":s.changeDirection("left");break;case"ArrowRight":s.changeDirection("right");break;case"p":case"P":s.togglePause()?m.classList.remove("active"):E()&&m.classList.add("active");break}});M.addEventListener("click",()=>s.changeDirection("up"));q.addEventListener("click",()=>s.changeDirection("down"));C.addEventListener("click",()=>s.changeDirection("left"));R.addEventListener("click",()=>s.changeDirection("right"));let L=0,k=0;v.addEventListener("touchstart",r=>{L=r.changedTouches[0].screenX,k=r.changedTouches[0].screenY,r.preventDefault()},{passive:!1});v.addEventListener("touchend",r=>{if(!s.isRunning||s.isPaused)return;const t=r.changedTouches[0].screenX,n=r.changedTouches[0].screenY,h=t-L,e=n-k;Math.abs(h)>Math.abs(e)?h>0?s.changeDirection("right"):s.changeDirection("left"):e>0?s.changeDirection("down"):s.changeDirection("up"),r.preventDefault()},{passive:!1});let x=0;v.addEventListener("touchend",r=>{const t=new Date().getTime(),n=t-x;n<300&&n>0&&(s.togglePause(),r.preventDefault()),x=t});
